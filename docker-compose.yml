# Copy .env.example to .env and set BASE_URL + SESSION_SECRET before running.
services:
  app:
    build: .
    env_file:
      - path: .env
        required: false   # falls back to environment / built-in defaults if .env absent
    ports:
      - "8080:8080"
    volumes:
      - data:/data
    environment:
      # Defaults â€” overridden by .env when present
      DATA_DIR: /data
      FONT_PATH: /usr/share/fonts/truetype/dejavu/DejaVuSans.ttf
      VENV_PATH: /opt/venv
    restart: unless-stopped

  # Optional: reverse proxy with automatic HTTPS
  # Uncomment and edit Caddyfile to use.
  # caddy:
  #   image: caddy:2-alpine
  #   ports:
  #     - "80:80"
  #     - "443:443"
  #   volumes:
  #     - ./Caddyfile:/etc/caddy/Caddyfile
  #     - caddy_data:/data
  #     - caddy_config:/config
  #   depends_on:
  #     - app

volumes:
  data:
  # caddy_data:
  # caddy_config:
