# DownloadOnce configuration
# Copy this file to .env and adjust values before starting.
# docker compose automatically reads .env from the project root.

# ─── Required ────────────────────────────────────────────────────────────────

# Public-facing URL (used in download links sent to recipients)
BASE_URL=http://localhost:8080

# 32+ byte random secret for session and CSRF signing.
# Generate a value: openssl rand -hex 32
SESSION_SECRET=change-me-before-going-to-production

# ─── Server ──────────────────────────────────────────────────────────────────

LISTEN_ADDR=:8080
DATA_DIR=/data
LOG_LEVEL=info

# ─── Workers ─────────────────────────────────────────────────────────────────

# Number of concurrent watermark encoding workers
WORKER_COUNT=2

# Maximum upload file size in bytes (default: 50 GB)
MAX_UPLOAD_BYTES=53687091200

# How long an incomplete chunked upload session is kept (hours)
UPLOAD_SESSION_TTL_HOURS=24

# ─── Access control ──────────────────────────────────────────────────────────

# Allow anyone to register a new account (false = admin creates accounts only)
ALLOW_REGISTRATION=false

# ─── Watermarking ────────────────────────────────────────────────────────────

FONT_PATH=/usr/share/fonts/truetype/dejavu/DejaVuSans.ttf
VENV_PATH=/opt/venv

# Estimated watermark compression ratio (used for disk-space estimates)
WM_COMPRESSION_FACTOR=0.9

# ─── Disk space monitoring ───────────────────────────────────────────────────

# Free-disk percentage thresholds (yellow warning / red alert / block uploads)
DISK_WARN_YELLOW_PCT=20
DISK_WARN_RED_PCT=10
DISK_WARN_BLOCK_PCT=5

# Hard cap on total app data in bytes (0 = unlimited)
MAX_STORAGE_BYTES=0

# ─── Cleanup scheduler ───────────────────────────────────────────────────────

# How often expired campaigns and sessions are cleaned up (minutes)
CLEANUP_INTERVAL_MINS=60

# ─── SMTP (optional — leave SMTP_HOST empty to disable email) ────────────────

# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=user@example.com
# SMTP_PASS=secret
# SMTP_FROM=noreply@example.com
