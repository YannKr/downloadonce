{{define "content"}}
<div class="page-header">
  <h1>Recipient Groups</h1>
  <a href="/recipients" class="btn btn-secondary">All Recipients</a>
</div>

<div class="grid-2">
  <div>
    <h2>Create New Group</h2>
    <form method="POST" action="/recipients/groups">
      {{.CSRFField}}
      <div class="form-group">
        <label for="name">Name</label>
        <input type="text" id="name" name="name" required maxlength="100" placeholder="e.g. Festival Circuit 2026">
      </div>
      <div class="form-group">
        <label for="description">Description (optional)</label>
        <textarea id="description" name="description" rows="2" maxlength="500" placeholder="Optional notes about this group."></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Create Group</button>
    </form>
  </div>
</div>

<h2>All Groups</h2>
{{if .Data.Groups}}
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Members</th>
      <th>Created</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {{range .Data.Groups}}
    <tr>
      <td><a href="/recipients/groups/{{.ID}}">{{.Name}}</a></td>
      <td>{{.Description}}</td>
      <td>{{.MemberCount}}</td>
      <td>{{formatTime .CreatedAt}}</td>
      <td>
        <form method="POST" action="/recipients/groups/{{.ID}}/delete" onsubmit="return confirm('Delete group {{.Name}}? Recipients will not be deleted.')">
          {{$.CSRFField}}
          <button type="submit" class="btn btn-sm btn-danger">Delete</button>
        </form>
      </td>
    </tr>
    {{end}}
  </tbody>
</table>
{{else}}
<p class="text-muted">No groups yet. Create one above to save a reusable list of recipients for campaigns.</p>
{{end}}
{{end}}
