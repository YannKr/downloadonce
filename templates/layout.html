{{define "layout.html"}}<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="csrf-token" content="{{.CSRFToken}}">
  <title>{{.Title}} - DownloadOnce</title>
  <link rel="stylesheet" href="/static/style.css">
  <script src="/static/sse.js" defer></script>
  <script src="/static/upload.js" defer></script>
</head>
<body>
  {{if .Authenticated}}
  <nav class="nav">
    <div class="nav-brand">DownloadOnce</div>
    <div class="nav-links">
      <a href="/dashboard">Dashboard</a>
      <a href="/assets">Assets</a>
      <a href="/campaigns">Campaigns</a>
      <a href="/recipients">Recipients</a>
      <a href="/detect">Detect</a>
      <a href="/analytics">Analytics</a>
      {{if .IsAdmin}}
      <a href="/admin/users">Users</a>
      <a href="/admin/campaigns">All Campaigns</a>
      <a href="/admin/audit">Audit</a>
      {{end}}
      <a href="/settings">Settings</a>
      <form method="POST" action="/logout" style="display:inline">
        {{.CSRFField}}
        <button type="submit" class="btn-link">Logout ({{.UserName}})</button>
      </form>
    </div>
  </nav>
  {{end}}
  <main class="container">
    {{if and .IsAdmin (gt .DiskWarning 0)}}
    <div class="alert {{if ge .DiskWarning 2}}alert-error{{else}}alert-warning{{end}}">
      Disk space: {{.DiskWarnMsg}} &mdash; <a href="/admin/storage">View details</a>
    </div>
    {{end}}
    {{if .Error}}<div class="alert alert-error">{{.Error}}</div>{{end}}
    {{if .Flash}}<div class="alert alert-success">{{.Flash}}</div>{{end}}
    {{template "content" .}}
  </main>
</body>
</html>{{end}}
